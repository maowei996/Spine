{"version":3,"sources":["file:///Users/weimao/XiaYu/VScodeProject/CocosCreate/spine/assets/src/Data/SpineData.ts"],"names":["SpineData","bJson","bBinary","name","key","url","version","defanimation","_jsonData","_atlasData","_skeletData","_textureData","width","height","fps","bones","slots","skeletonData","events","Array","skins","animations","parse","_skeletonCashe","length","v","duration","toString","push","iterator","split"],"mappings":";;;kEAGaA,S;;;;;;;;;;;;;;;;;2BAAAA,S,GAAN,MAAMA,SAAN,CAAgB;AAAA;AAAA,eAEdC,KAFc,GAEG,KAFH;AAAA,eAIdC,OAJc,GAIK,KAJL;AAAA,eAMdC,IANc,GAMC,EAND;AAAA,eAQdC,GARc,GAQA,EARA;AAAA,eAUdC,GAVc,GAUA,EAVA;AAAA,eAYdC,OAZc,GAYI,OAZJ;AAAA,eAedC,YAfc,GAeS,EAfT;AAAA,eAiBdC,SAjBc,GAiBI,IAjBJ;AAAA,eAkBdC,UAlBc,GAkBO,IAlBP;AAAA,eAmBdC,WAnBc,GAmBK,IAnBL;AAAA,eAoBdC,YApBc,GAoBa,IApBb;AAAA,eAsBdC,KAtBc,GAsBE,CAtBF;AAAA,eAuBdC,MAvBc,GAuBG,CAvBH;AAAA,eAyBdC,GAzBc,GAyBA,CAzBA;AAAA,eA2BdC,KA3Bc,GA2BE,CA3BF;AAAA,eA4BdC,KA5Bc,GA4BE,CA5BF;AAAA,eA+BdC,YA/Bc,GA+BkB,IA/BlB;AAAA,eAkCdC,MAlCc,GAkCU,IAAIC,KAAJ,EAlCV;AAAA,eAqCdC,KArCc,GAqCS,IAAID,KAAJ,EArCT;AAAA,eAwCdE,UAxCc,GAwCc,EAxCd;AAAA;;AA2CdC,QAAAA,KAAK,CAAEC,cAAF,EAAuB;AAAA;;AAEjC,eAAKX,KAAL,GAAaW,cAAc,CAACX,KAA5B;AACA,eAAKC,MAAL,GAAcU,cAAc,CAACV,MAA7B;AACA,eAAKP,OAAL,GAAeiB,cAAc,CAACjB,OAA9B;AACA,eAAKQ,GAAL,GAAWS,cAAc,CAACT,GAA1B;AAEA,cAAIO,UAAU,GAAGE,cAAc,CAACF,UAAf,IAA6B,EAA9C;AACA,cAAID,KAAK,GAAGG,cAAc,CAACH,KAAf,IAAwB,EAApC;AACA,cAAIF,MAAM,GAAGK,cAAc,CAACL,MAAf,IAAyB,EAAtC;AAEA,eAAKH,KAAL,2BAAaQ,cAAc,CAACR,KAA5B,qBAAa,qBAAsBS,MAAnC;AACA,eAAKR,KAAL,2BAAaO,cAAc,CAACP,KAA5B,qBAAa,qBAAsBQ,MAAnC;;AAEA,eAAK,MAAMC,CAAX,IAAgBJ,UAAhB,EAA4B;AAC1B,gBAAIlB,IAAI,GAAGsB,CAAC,CAACtB,IAAb,CAD0B,CACP;;AACnB,gBAAGsB,CAAC,CAACC,QAAF,IAAc,CAAjB,EAAmB;AACjBvB,cAAAA,IAAI,GAAGA,IAAI,GAAG,GAAP,GAAa,CAAEsB,CAAC,CAACC,QAAF,GAAa,CAAd,GAAmBD,CAAC,CAACC,QAArB,GAA+B,CAAhC,EAAmCC,QAAnC,EAApB;AACD;;AACD,iBAAKN,UAAL,CAAgBO,IAAhB,CAAqBzB,IAArB;AACD;;AAED,cAAGiB,KAAK,YAAYD,KAApB,EAA0B;AACxB,iBAAK,MAAMU,QAAX,IAAuBT,KAAvB,EAA8B;AAC5B,mBAAKA,KAAL,CAAWQ,IAAX,CAAgBC,QAAQ,CAAC1B,IAAzB;AACD;AACF,WAJD,MAIM;AACJ,iBAAKiB,KAAL,CAAWQ,IAAX,CAAgB,SAAhB;AACD;;AAED,eAAK,MAAMC,QAAX,IAAuBX,MAAvB,EAA+B;AAC7B,iBAAKA,MAAL,CAAYU,IAAZ,CAAiBC,QAAQ,CAAC1B,IAAT,IAAiB,OAAlC;AACD;;AAED,eAAKI,YAAL,GAAoB,KAAKc,UAAL,CAAgB,CAAhB,EAAmBS,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAApB;AACD;;AA9EoB,O","sourcesContent":["import { Texture2D,sp } from 'cc';\n\n\nexport class SpineData {\n\n  public bJson: boolean = false;\n  \n  public bBinary: boolean = false;\n\n  public name: string = '';\n\n  public key: string = '';\n\n  public url: string = '';\n\n  public version: string = '0.0.0';\n\n  //默认播放的时间线\n  public defanimation: string = '';\n\n  public _jsonData : any = null;\n  public _atlasData: string = null;\n  public _skeletData: any = null;\n  public _textureData : Texture2D = null;\n\n  public width: number = 0;\n  public height: number = 0;\n\n  public fps: number = 0;\n\n  public bones: number = 0;\n  public slots: number = 0;\n\n  //spine数据实例化对象\n  public skeletonData: sp.SkeletonData = null;\n\n  //帧事件\n  public events: Array<string> = new Array();\n\n  //皮肤\n  public skins: Array<string> = new Array();\n\n  //Animation\n  public animations: Array<string> = [];\n\n\n  public parse( _skeletonCashe: any ){\n\n    this.width = _skeletonCashe.width;\n    this.height = _skeletonCashe.height;\n    this.version = _skeletonCashe.version;\n    this.fps = _skeletonCashe.fps;\n\n    let animations = _skeletonCashe.animations || [];\n    let skins = _skeletonCashe.skins || [];\n    let events = _skeletonCashe.events || [];\n\n    this.bones = _skeletonCashe.bones?.length;\n    this.slots = _skeletonCashe.slots?.length;\n\n    for (const v of animations) {\n      let name = v.name  // + v.duration || '';\n      if(v.duration >= 0){\n        name = name + '-' + ((v.duration > 0) ? v.duration: 0).toString();\n      }\n      this.animations.push(name);\n    }\n\n    if(skins instanceof Array){\n      for (const iterator of skins) {\n        this.skins.push(iterator.name);\n      }\n    } else{\n      this.skins.push('default');\n    }\n\n    for (const iterator of events) {\n      this.events.push(iterator.name || 'error');\n    }\n\n    this.defanimation = this.animations[0].split('-')[0];\n  }\n\n}"]}