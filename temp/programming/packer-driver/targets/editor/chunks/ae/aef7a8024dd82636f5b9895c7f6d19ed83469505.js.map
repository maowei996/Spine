{"version":3,"sources":["file:///Users/weimao/XiaYu/VScodeProject/CocosCreate/spine/assets/src/Machine.ts"],"names":["_decorator","Component","assetManager","Texture2D","Sprite","Html5","ccclass","property","Machine","start","onTest","console","log","spr","sp","HtmlFileInput","file","LoadImage","url","loadRemoto","base","loadRemote","err","asset","cc","error","texture","image","spriteFrame"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAgBC,MAAAA,Y,OAAAA,Y;AAAaC,MAAAA,S,OAAAA,S;AAI1CC,MAAAA,M,OAAAA,M;;AAFCC,MAAAA,K,iBAAAA,K;;;;;;;;;;;OAIH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;yBAGjBQ,O,WADZF,OAAO,CAAC,SAAD,C,UAGLC,QAAQ,CAACH,MAAD,C,2BAHX,MACaI,OADb,SAC6BP,SAD7B,CACuC;AAAA;AAAA;;AAAA;AAAA;;AAKrCQ,QAAAA,KAAK,GAAG,CAEP;;AAODC,QAAAA,MAAM,GAAS;AACbC,UAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AAEA,cAAIC,GAAG,GAAG,KAAKC,EAAf;AAMA;;AACA;AAAA;AAAA,8BAAMC,aAAN,CAAoB,UAAUC,IAAV,EAAsB;AAExCL,YAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAsCI,IAAtC;AAEA;AAAA;AAAA,gCAAMC,SAAN,CAAgBD,IAAhB,EAAqBH,GAArB,EAA0B,UAAUK,GAAV,EAAsB,CAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGD,aAZD,EAJwC,CAkBxC;AACA;AACA;AAED,WAtBD;AAuBD;;AAEDC,QAAAA,UAAU,GAAI;AACZ;AACA;AAEA,cAAIL,EAAE,GAAG,KAAKA,EAAd;AACA,cAAIM,IAAI,GAAG,+CAAX;AACAlB,UAAAA,YAAY,CAACmB,UAAb,CAAwBD,IAAxB,EAA8B,CAACE,GAAD,EAAMC,KAAN,KAA4B;AACxD,gBAAID,GAAJ,EAAS,OAAOE,EAAE,CAACC,KAAH,CAASH,GAAT,CAAP;AACTX,YAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBW,KAArB;AAEA,gBAAIG,OAAO,GAAG,IAAIvB,SAAJ,EAAd;AACAuB,YAAAA,OAAO,CAACC,KAAR,GAAgBJ,KAAhB,CALwD,CAOxD;AACA;AACA;AACA;;AACAT,YAAAA,EAAE,CAACc,WAAH,CAAeF,OAAf,GAAyBA,OAAzB;AACD,WAZD;AAaD;;AApEoC,O;;;;;iBAGxB,I","sourcesContent":["\n\nimport { _decorator, Component, Node,assetManager,Texture2D,SpriteFrame,ImageAsset } from 'cc';\nimport FileTools from './FileTools';\nimport { Html5 } from './Html5';\n\nimport {Sprite} from 'cc'\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('Machine')\nexport class Machine extends Component {\n\n  @property(Sprite)\n  sp: Sprite = null!;\n\n  start() {\n    \n  }\n\n\n\n\n\n\n  onTest() :void {\n    console.log('==========点击测试按钮！！');\n\n    let spr = this.sp;\n\n    \n\n\n\n    /***/\n    Html5.HtmlFileInput(function( file : any ){\n\n      console.log('===========选择文件成功-data:',file);\n\n      Html5.LoadImage(file,spr, function( url:string ){\n\n        //const base = url;\n        //assetManager.loadRemote(base, { ext: '.png' }, (err: Error, texture: Texture2D) => {\n        //let base = 'http://127.0.0.1/image/Socre_BeachBabes_9.png';\n        //assetManager.loadRemote(base, (err, texture: Texture2D) => {\n        //  if (err) return cc.error(err);\n        //  console.log('asset:',texture)\n        //  const sf = new SpriteFrame(texture);\n        //})\n\n\n      });\n\n      //FileTools.getInstance().readLocalFile(file,1,function( data : any ){\n      //  console.log('===========解析数据成功-data:',data);\n      //});\n\n    });\n  }\n\n  loadRemoto () {\n    //const base = url;\n    //assetManager.loadRemote(base, { ext: '.png' }, (err: Error, texture: Texture2D) => {\n\n    let sp = this.sp;\n    let base = 'http://127.0.0.1/image/Socre_BeachBabes_9.png';\n    assetManager.loadRemote(base, (err, asset: ImageAsset) => {\n      if (err) return cc.error(err);\n      console.log('asset:',asset)\n\n      let texture = new Texture2D();\n      texture.image = asset;\n\n      // sp.spriteFrame = new SpriteFrame();\n      // sp.spriteFrame.setTexture(texture)\n      // sp.spriteFrame._texture = texture\n      // sp.spriteFrame._texture = texture.getHtmlElementObj()\n      sp.spriteFrame.texture = texture\n    })\n  }\n}\n\n\n\n"]}