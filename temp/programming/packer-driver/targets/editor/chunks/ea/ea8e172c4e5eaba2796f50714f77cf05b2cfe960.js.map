{"version":3,"sources":["file:///Users/mac/WorkSpace/maowei/spine/assets/src/Menu/Menu.ts"],"names":["_decorator","Component","Node","SkeletManager","OptionScrollview","EventType","EventData","EventManager","ccclass","property","MenuType","Menu","_loop","start","updateOperPanle","operType","visible","fileOperPanel","active","FILE","animationPanel","ANIMATION","skinPanel","SKIN","onFileMenu","onSkeleron","SKEL","onAnimation","skelet","getInstance","console","log","array","animations","option","getComponent","setData","onSkin","push","onToggleDebug","onToggleLoop","param","eventType","CHANGE_SPINE_LOOP","emit"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node } from 'cc';\nimport { SkeletManager } from '../Data/SkeletManager';\nimport { OptionScrollview } from './OptionScrollview';\nimport {EventType, EventData} from '../Define';\nimport EventManager from '../EventManager';\nconst { ccclass, property } = _decorator;\n\n\nenum MenuType {\n  FILE,\n  SKEL,\n  ANIMATION,\n  SKIN,\n}\n\n@ccclass('Menu')\nexport class Menu extends Component {\n\n  @property(Node)\n  fileOperPanel: Node = null;\n\n  @property(Node)\n  animationPanel: Node = null;\n\n  @property(Node)\n  skinPanel: Node = null;\n\n\n  _loop: Boolean = true;\n\n\n\n  start() {\n\n  }\n\n\n\n  private updateOperPanle( operType: MenuType, visible: boolean ): void {\n    this.fileOperPanel.active = (operType == MenuType.FILE) ? visible: false;\n    this.animationPanel.active = (operType == MenuType.ANIMATION)? visible: false;\n    this.skinPanel.active = (operType == MenuType.SKIN)? visible: false;\n  }\n\n\n  onFileMenu () {\n\n    let active = this.fileOperPanel.active;\n    this.fileOperPanel.active = !active;\n    this.updateOperPanle(MenuType.FILE, !active);\n  }\n\n\n  onSkeleron () {\n    this.updateOperPanle(MenuType.SKEL, false);\n\n  }\n\n  onAnimation() {\n    let active = this.animationPanel.active;\n    this.animationPanel.active = !active;\n    this.updateOperPanle(MenuType.ANIMATION, !active);\n\n    if(!active){\n\n      let skelet = SkeletManager.getInstance().skelet;\n      if(!skelet){\n        return console.log('[Menu]:not SpineData!!');\n      }\n\n      let array = skelet.animations || [];\n      //array.push('actionframe');\n      //array.push('idleframe');\n      //array.push('idle');\n      //array.push('run');\n\n      let option = this.animationPanel.getComponent(OptionScrollview);\n      option.setData(2,array);\n    }\n  }\n\n  onSkin(){\n    let active = this.skinPanel.active;\n    this.skinPanel.active = !active;\n\n    this.updateOperPanle(MenuType.SKIN, !active);\n    if(!active){\n\n      let array = [];\n      array.push('lanjingw');\n      array.push('dayi');\n      array.push('aman');\n      array.push('wugeng');\n\n      let option = this.skinPanel.getComponent(OptionScrollview);\n      option.setData(3,array);\n    }\n  }\n\n  onToggleDebug() {\n    this.updateOperPanle(-1, false);\n  }\n  \n  onToggleLoop() {\n    this._loop = !this._loop;\n\n    let param: EventData = new EventData();\n    param.eventType = EventType.CHANGE_SPINE_LOOP;;\n    param.param = this._loop;\n\n    EventManager.getInstance().emit('machine', param);\n\n  }\n}\n\n"]}