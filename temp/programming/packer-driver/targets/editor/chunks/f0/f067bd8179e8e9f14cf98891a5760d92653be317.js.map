{"version":3,"sources":["file:///Users/weimao/XiaYu/VScodeProject/CocosCreate/Spine/assets/src/Menu/OptionScrollview.ts"],"names":["_decorator","Component","Prefab","ScrollView","instantiate","ItemOption","EventType","EventData","EventManager","Html5","ccclass","property","ViewType","OptionScrollview","Number","_data","_curChooseName","start","skeletons","data","Array","loadLisit","setData","viewtype","viewType","array","content","getComponent","removeAllChildren","i","length","item","itemOption","addChild","option","itemName","clickFunc","ani","Event_view","choose","setClipboardData","bind","animation","console","log","notify","eventType","Spine_view","CHANGE_SPINE","Animation_view","CHANGE_SPINE_ANIMATION","Skin_viwe","UPDATE_SPINE_SKIN","param","getInstance","emit"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node,Prefab,ScrollView, instantiate } from 'cc';\nimport { ItemOption } from './ItemOption';\nimport {EventType, EventData} from '../Define';\nimport EventManager from '../EventManager';\nimport { Html5 } from '../Tool/Html5';\n\nconst { ccclass, property } = _decorator;\n  \n//界面类型\nenum ViewType {\n  none = 0,\n  Spine_view = 1,\n  Animation_view =2,\n  Skin_viwe = 3,\n  Event_view = 4,\n\n  MAX = 255\n}\n\n@ccclass('OptionScrollview')\nexport class OptionScrollview extends Component {\n\n  @property(Prefab)\n  itemOption: Prefab = null;\n\n  @property(Number)\n  viewType: Number = 0;\n\n  private _data: any = null;\n\n  private _curChooseName: string = '';\n\n\n  start() {\n    // this.loadLisit([]);\n    // this.skeletons([]);\n  }\n\n  public skeletons(data: any) {\n    this._data = data;\n    if(data && (data instanceof Array)) {\n      this.loadLisit(data);\n    }\n  }\n\n\n  public setData(viewtype:any, data:any) {\n\n    this.viewType = viewtype;\n    this._data = data;\n\n    if(data && (data instanceof Array)) {\n      this.loadLisit(data);\n    }\n  }\n\n  public loadLisit( array: any ) {\n\n    let content = this.getComponent(ScrollView).content;\n    content.removeAllChildren();\n\n    for(let i = 0; i < array.length; i++){\n\n      let item = instantiate(this.itemOption);\n      content.addChild(item);\n\n      let option = item.getComponent(ItemOption);\n      option.itemName = array[i];\n\n      option.clickFunc = function(ani:string){\n\n        if(this.viewType != ViewType.Event_view){\n          this.choose(ani);\n        } else  {\n          Html5.setClipboardData(ani);\n        }\n\n      }.bind(this);\n\n    }\n\n  }\n\n  private choose( animation: string ) {\n\n    console.log('choose:',animation,this._curChooseName);\n    if(this._curChooseName!=animation){\n\n      this._curChooseName = animation;\n      // console.log('选择item选项_name = ',animation);\n      this.notify();\n    }\n  }\n\n  private notify() {\n\n    let eventType = 0;\n    if(this.viewType == ViewType.Spine_view){\n      eventType = EventType.CHANGE_SPINE;\n    }\n    else if(this.viewType == ViewType.Animation_view) {\n      eventType = EventType.CHANGE_SPINE_ANIMATION;\n      Html5.setClipboardData(this._curChooseName);\n    }\n    else if(this.viewType == ViewType.Skin_viwe) {\n      eventType = EventType.UPDATE_SPINE_SKIN;\n      Html5.setClipboardData(this._curChooseName);\n    }\n\n    let param: EventData = new EventData();\n    param.eventType = eventType;\n    param.param = this._curChooseName;\n\n    EventManager.getInstance().emit('machine', param);\n  }\n}"]}